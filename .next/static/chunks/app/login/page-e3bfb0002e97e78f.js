(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{314:(e,t,r)=>{Promise.resolve().then(r.bind(r,6960))},5695:(e,t,r)=>{"use strict";var n=r(8999);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},6960:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(5155),s=r(2115),a=r(5695),o=r(9402);function c(){let[e,t]=(0,s.useState)(null),r=(0,a.useRouter)(),{login:c}=(0,o.A)(),i=async e=>{e.preventDefault(),c(e.target[0].value,e.target[1].value).then(()=>{r.push("/")}).catch(e=>{t("Identifiant ou mot de passe incorrect")})};return(0,n.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center h-[100vh] w-[100vw] py-[5vh] md:px-[5vw]",children:[(0,n.jsx)("div",{className:"flex items-center justify-center w-[80%] h-[30%] C-text-white",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center w-[100%] h-[90%] gap-6 md:gap-10",children:[(0,n.jsx)("img",{src:"/images/elements/logo-relay.svg",className:"w-auto h-[10vh] md:h-[20vh]"}),(0,n.jsx)("h1",{className:"font-extrabold text-4xl md:text-5xl",children:"Relay - R\xe9assort"})]})}),(0,n.jsx)("div",{className:"flex items-center justify-center w-[80%] h-[70%]",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-around w-[100%] md:w-[50%] h-[100%] C-bg-white C-text-black rounded-[40px] gap-5 py-[5vh]",children:[(0,n.jsx)("h2",{className:"text-4xl font-extrabold",children:"Bienvenue !"}),(0,n.jsx)("p",{className:"text-2xl text-center",children:"Connectez-vous au compte du magasin"}),e&&(0,n.jsx)("p",{className:"text-red-500",children:e}),(0,n.jsxs)("form",{onSubmit:i,className:"flex flex-col items-center justify-around h-[50%] w-[80%] gap-5",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center w-[100%] gap-5",children:[(0,n.jsx)("input",{type:"text",id:"name",placeholder:"Identifiant",className:"w-full h-[50px] rounded-[20px] px-5 C-border-red-var2 C-shadow-red-var2 border-[1px]"}),(0,n.jsx)("input",{type:"password",id:"password",placeholder:"Mot de passe",className:"w-full h-[50px] rounded-[20px] px-5 C-border-red-var2 C-shadow-red-var2 border-[1px]"})]}),(0,n.jsx)("button",{type:"submit",className:"w-[100%] py-[1vh] C-bg-red C-text-white rounded-[20px] font-bold text-2xl cursor-pointer ",children:"Connexion"})]})]})})]})}},7383:(e,t,r)=>{"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{A:()=>s});var s=function e(t,r){function s(e,s,a){if("undefined"!=typeof document){"number"==typeof(a=n({},r,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var c in a){if(a[c])o+="; "+c,!0!==a[c]&&(o+="="+a[c].split(";")[0])}return document.cookie=e+"="+t.write(s,e)+o}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},s=0;s<r.length;s++){var a=r[s].split("="),o=a.slice(1).join("=");try{var c=decodeURIComponent(a[0]);if(n[c]=t.read(o,c),e===c)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){s(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},9142:(e,t,r)=>{"use strict";r.d(t,{O5:()=>c,QF:()=>u,c4:()=>i,iD:()=>o});var n=r(7383);let{fetchData:s}=r(9360),a="auth_token";async function o(e,t){try{let r=await s("/login",{method:"POST",body:JSON.stringify({Name:e,Password:t})});return c(r.token),await r}catch(e){return null}}function c(e){n.A.set(a,e,{expires:1,sameSite:"Strict"}),n.A.set("pendingProducts",[])}function i(){return n.A.get(a)}function u(){n.A.remove(a)}},9360:(e,t,r)=>{"use strict";r.r(t),r.d(t,{fetchData:()=>s});var n=r(9142);async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=(0,n.c4)(),s=await fetch("".concat("https://relay-api.mathis-mercier.mds-angers.yt/api").concat(e),{...t,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:r?"Bearer ".concat(r):""},credentials:"include"});if(!s.ok)throw Error("Erreur HTTP! Statut: ".concat(s.status));return s.json()}catch(e){return null}}},9402:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,O:()=>i});var n=r(5155),s=r(2115),a=r(9142),o=r(5695);let c=(0,s.createContext)();function i(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[u,l]=(0,s.useState)((0,a.c4)()),d=(0,o.useRouter)();(0,s.useEffect)(()=>{{let e=localStorage.getItem("user");e&&i(JSON.parse(e))}},[]),(0,s.useEffect)(()=>{u||d.push("/login")},[u]);let p=async(e,t)=>{let r=await (0,a.iD)(e,t);r&&r.token&&((0,a.O5)(r.token),i(r.user),l(r.token),localStorage.setItem("user",JSON.stringify(r.user)),d.push("/"))};return(0,n.jsx)(c.Provider,{value:{user:r,token:u,login:p,logout:()=>{(0,a.QF)(),i(null),l(null),localStorage.removeItem("user"),d.push("/login")}},children:t})}function u(){return(0,s.useContext)(c)}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(314)),_N_E=e.O()}]);