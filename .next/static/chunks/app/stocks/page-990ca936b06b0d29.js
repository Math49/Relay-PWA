(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[328],{783:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(5155),l=s(6874),r=s.n(l);function i(e){let{path:t}=e;return(0,a.jsx)("div",{children:(0,a.jsx)(r(),{href:t,className:"p-4",children:(0,a.jsx)("i",{className:"fa-solid fa-arrow-left-long text-3xl C-text-black","aria-hidden":"true"})})})}},1210:(e,t,s)=>{"use strict";s.d(t,{NI:()=>r,yW:()=>l,yb:()=>c});let{fetchData:a}=s(9360);async function l(e){try{let t=await a("/stock/".concat(e),{method:"GET"});return console.log("Stocks:",t),await t}catch(e){return null}}async function r(e,t){try{let s=await a("/stocks/".concat(e),{method:"PUT",body:JSON.stringify({stocks:t})});return await s}catch(e){return null}}async function i(e){try{let t=await a("/stocks",{method:"POST",body:JSON.stringify({stocks:e})});return await t}catch(e){return null}}async function c(e,t){try{let s=await l(e),a={};s.forEach(e=>{a[e.ID_product]=e});let c=[],n=[];return t.forEach(t=>{let s=parseInt(t.Quantity)*t.Box_quantity,l=a[t.ID_product];l?0===t.Packing?c.push({ID_product:t.ID_product,Quantity:l.Quantity+s,Nmb_boxes:l.Nmb_boxes+parseInt(t.Quantity),Nmb_on_shelves:l.Nmb_on_shelves}):c.push({ID_product:t.ID_product,Quantity:l.Quantity,Nmb_boxes:l.Nmb_boxes+parseInt(t.Quantity),Nmb_on_shelves:l.Nmb_on_shelves}):0===t.Packing?n.push({ID_product:t.ID_product,ID_store:e,Quantity:s,Nmb_boxes:parseInt(t.Quantity),Nmb_on_shelves:0}):n.push({ID_product:t.ID_product,ID_store:e,Quantity:0,Nmb_boxes:parseInt(t.Quantity),Nmb_on_shelves:0})}),c.length>0&&await r(e,c),n.length>0&&await i(n),await l(e)}catch(e){return console.error("Erreur lors de l'ajout au stock :",e),null}}},1756:(e,t,s)=>{"use strict";s.d(t,{b:()=>l});let{fetchData:a}=s(9360);async function l(e){try{let t=await a("/categoryEnable/".concat(e),{method:"GET"});return await t}catch(e){return null}}},3179:(e,t,s)=>{"use strict";s.d(t,{W:()=>r,d:()=>l});let{fetchData:a}=s(9360);async function l(){try{let e=await a("/products",{method:"GET"});return await e}catch(e){return null}}async function r(e){try{let t=await a("/product",{method:"POST",body:JSON.stringify(e)});return await t}catch(e){return null}}},3448:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(5155),l=s(783),r=s(2115),i=s(1210),c=s(1756),n=s(9402),d=s(5068),o=s(6713);function x(e){let{stocks:t,isEditing:s,setStocks:l}=e,r=(e,t,s)=>{l(a=>a.map(a=>a.ID_stock===e?{...a,[t]:parseInt(s)||0}:a))};return t&&0!==t.length?(0,a.jsxs)("div",{className:"w-full flex flex-col items-center mt-2",children:[(0,a.jsxs)("div",{className:"w-[70%] text-black font-bold text-sm flex justify-end gap-[30px] mb-2 px-3",children:[(0,a.jsx)("span",{className:"col-span-2",children:"Produit"}),(0,a.jsx)("span",{className:"text-center",children:"Par bo\xeete"}),(0,a.jsx)("span",{className:"text-center",children:"En rayon"}),(0,a.jsx)("span",{className:"text-center",children:"Bo\xeetes"}),(0,a.jsx)("span",{className:"text-center",children:"Quantit\xe9"}),(0,a.jsx)("span",{className:"text-center",children:"En vrac ?"})]}),(0,a.jsx)("div",{className:"w-[90%] flex flex-col items-center gap-2",children:t.map(e=>{var t,l,i;return(0,a.jsx)("div",{className:"bg-white w-[90%] rounded-[10px] border-[2px] C-border-red mb-2 overflow-hidden transition-all duration-300",children:(0,a.jsxs)("div",{className:"flex h-[5vh]",children:[(0,a.jsx)("div",{className:"flex items-center justify-center h-full gap-3 border-r-black border-r-[1px] w-[10%]",children:(0,a.jsx)("img",{src:e.product.Image||"/images/elements/default-product.jpg",alt:null===(t=e.product)||void 0===t?void 0:t.Label,className:"w-auto h-full rounded-[5px] object-cover"})}),(0,a.jsxs)("div",{className:"flex justify-between items-center w-[85%] h-full py-3 px-2 pr-4",children:[(0,a.jsxs)("div",{className:"w-[30%]",children:[(0,a.jsx)("p",{className:"C-text-black font-semibold text-xl",children:null===(l=e.product)||void 0===l?void 0:l.Label}),(0,a.jsx)("p",{className:"C-text-black font-normal text-sm",children:null===(i=e.product)||void 0===i?void 0:i.Barcode})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-lg justify-between w-[70%]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("i",{className:"fa-solid fa-boxes-stacked C-text-red text-2xl","aria-hidden":"true"}),(0,a.jsx)("p",{className:"C-text-black font-bold ",children:e.product.Box_quantity})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"fa-solid fa-cash-register text-2xl C-text-red","aria-hidden":"true"}),0===e.product.Packing?s?(0,a.jsx)("input",{type:"number",value:e.Nmb_on_shelves,onChange:t=>r(e.ID_stock,"Nmb_on_shelves",t.target.value),className:"w-[50px] text-center border border-gray-300 rounded C-text-black font-bold"}):(0,a.jsx)("span",{className:"C-text-black font-bold",children:e.Nmb_on_shelves}):(0,a.jsx)("span",{className:"text-gray-400",children:"-"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"fa-solid fa-box text-2xl C-text-red","aria-hidden":"true"}),s?(0,a.jsx)("input",{type:"number",value:e.Nmb_boxes,onChange:t=>r(e.ID_stock,"Nmb_boxes",t.target.value),className:"w-[50px] text-center border border-gray-300 rounded C-text-black font-bold"}):(0,a.jsxs)("span",{className:"C-text-black font-bold",children:[e.Nmb_boxes,0===e.product.Packing&&e.Nmb_boxes*e.product.Box_quantity!==e.Quantity&&(0,a.jsx)("span",{className:"ml-1",children:"(1)"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("i",{className:"fa-solid fa-dolly C-text-red text-2xl","aria-hidden":"true"}),s?(0,a.jsx)("input",{type:"number",value:e.Quantity,onChange:t=>r(e.ID_stock,"Quantity",t.target.value),className:"w-[50px] text-center border border-gray-300 rounded C-text-black font-bold"}):(0,a.jsx)("p",{className:"C-text-black font-bold",children:e.Quantity})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"fa-solid fa-box-open text-2xl C-text-red","aria-hidden":"true"}),(0,a.jsx)("input",{type:"checkbox",className:"w-5 h-5",disabled:!0,checked:1===e.product.Packing})]})]})]})]})},e.ID_stock)})})]}):(0,a.jsx)("p",{className:"text-white text-center",children:"Aucun produit trouv\xe9."})}function u(e){let{stocks:t,isEditing:s,setStocks:l}=e,[i,c]=(0,r.useState)(null),n=e=>c(t=>t===e?null:e),d=(e,t,s)=>{l(a=>a.map(a=>a.ID_stock===e?{...a,[t]:parseInt(s)}:a))};return t&&0!==t.length?(0,a.jsx)("div",{className:"w-full flex flex-col items-center mt-2",children:t.map(e=>{var t,l,r;return(0,a.jsxs)("div",{className:"bg-white w-[90%] rounded-[10px] border-[2px] C-border-red mb-2 overflow-hidden transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex cursor-pointer h-[5vh]",onClick:()=>n(e.ID_stock),children:[(0,a.jsx)("div",{className:"flex items-center justify-center h-full gap-3 border-r-black border-r-[1px] w-[15%]",children:(0,a.jsx)("img",{src:e.product.Image||"/images/elements/default-product.jpg",alt:null===(t=e.product)||void 0===t?void 0:t.Label,className:"w-auto h-full rounded-[5px] object-cover"})}),(0,a.jsxs)("div",{className:"flex justify-between items-center w-[85%] h-full py-3 px-2 pr-4",children:[(0,a.jsxs)("div",{className:"w-[60%]",children:[(0,a.jsx)("p",{className:"C-text-black font-semibold text-xl",children:null===(l=e.product)||void 0===l?void 0:l.Label}),(0,a.jsx)("p",{className:"C-text-black font-normal text-sm",children:null===(r=e.product)||void 0===r?void 0:r.Barcode})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-lg justify-between w-[40%]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("i",{className:"fa-solid fa-boxes-stacked C-text-red text-2xl","aria-hidden":"true"}),(0,a.jsx)("p",{className:"C-text-black font-bold ",children:e.product.Box_quantity})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("i",{className:"fa-solid fa-dolly text-2xl C-text-red","aria-hidden":"true"}),s?(0,a.jsx)("input",{type:"number",value:e.Quantity,onChange:t=>d(e.ID_stock,"Quantity",t.target.value),className:"w-[50px] text-center border border-gray-300 rounded C-text-black font-bold"}):(0,a.jsx)("span",{className:"C-text-black font-bold",children:e.Quantity})]})]})]})]}),(0,a.jsx)("div",{className:"transition-all duration-300 ease-in-out overflow-hidden C-border-red-var2 border-t-[1px] ".concat(i===e.ID_stock?"max-h-[200px] opacity-100":"max-h-0 opacity-0"),children:(0,a.jsxs)("div",{className:"flex justify-around items-center px-6 py-3 border-t C-border-light",children:[0===e.product.Packing&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"fa-solid fa-cash-register text-2xl C-text-red","aria-hidden":"true"}),s?(0,a.jsx)("input",{type:"number",value:e.Nmb_on_shelves,onChange:t=>d(e.ID_stock,"Nmb_on_shelves",t.target.value),className:"w-[50px] text-center border border-gray-300 rounded C-text-black font-bold"}):(0,a.jsx)("span",{className:"C-text-black font-bold",children:e.Nmb_on_shelves})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"fa-solid fa-box text-2xl C-text-red","aria-hidden":"true"}),s?(0,a.jsx)("input",{type:"number",value:e.Nmb_boxes,onChange:t=>d(e.ID_stock,"Nmb_boxes",t.target.value),className:"w-[50px] text-center border border-gray-300 rounded C-text-black font-bold"}):(0,a.jsxs)("span",{className:"C-text-black font-bold",children:[e.Nmb_boxes,0===e.product.Packing&&e.Nmb_boxes*e.product.Box_quantity!==e.Quantity&&(0,a.jsx)("span",{className:"ml-1",children:"(1)"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"fa-solid fa-box-open text-2xl C-text-red","aria-hidden":"true"}),(0,a.jsx)("input",{type:"checkbox",className:"w-5 h-5",disabled:!0,checked:1===e.product.Packing})]})]})})]},e.ID_stock)})}):(0,a.jsx)("p",{className:"text-white text-center",children:"Aucun produit trouv\xe9."})}var m=s(760),h=s(6129);function f(e){let{onAdd:t,onEdit:s,isEditing:l}=e,[i,c]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-center gap-3",children:[(0,a.jsx)(m.N,{children:i&&(0,a.jsxs)(h.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},className:"flex flex-col items-center gap-3 mb-2",children:[(0,a.jsx)(h.P.button,{whileTap:{scale:.9},onClick:s,className:"w-12 h-12 rounded-full C-bg-red C-text-white flex items-center justify-center shadow-lg",children:(0,a.jsx)("i",{className:"fas ".concat(l?"fa-check":"fa-pen"),"aria-hidden":"true"})}),(0,a.jsx)(h.P.button,{whileTap:{scale:.9},onClick:()=>{c(!1),t()},className:"w-12 h-12 rounded-full C-bg-red C-text-white flex items-center justify-center shadow-lg",children:(0,a.jsx)("i",{className:"fas fa-plus","aria-hidden":"true"})})]})}),(0,a.jsx)(h.P.button,{onClick:()=>c(e=>!e),whileTap:{scale:.9},animate:{rotate:135*!!i},transition:{type:"spring",stiffness:260,damping:20},className:"w-16 h-16 rounded-full C-bg-red C-text-white text-3xl flex items-center justify-center shadow-xl",children:(0,a.jsx)("i",{className:"fas fa-plus","aria-hidden":"true"})})]})}var p=s(3179),b=s(7383);function j(e){let{onClose:t,onSubmit:s,createProduct:l}=e,i=(()=>{try{let e=b.A.get("pendingProducts");return e?JSON.parse(e):[]}catch(e){return[]}})(),[x,u]=(0,r.useState)(i),[m,h]=(0,r.useState)(null),[f,j]=(0,r.useState)(""),[N,v]=(0,r.useState)([]),[g,y]=(0,r.useState)([]),[w,k]=(0,r.useState)(null),[C,_]=(0,r.useState)(0),{user:I}=(0,n.A)(),D=e=>{h(t=>t===e?null:e)},S=g.filter(e=>e.Label.toLowerCase().includes(f.toLowerCase())||e.Barcode.startsWith(f)),P=N.filter(e=>S.some(t=>t.ID_category===e.ID_category)),E=(0,o.U)("(max-width: 768px)");return(0,r.useEffect)(()=>{(0,p.d)().then(e=>{e&&y(e)}),(async()=>{I&&I.ID_store&&v(await (0,c.b)(I.ID_store))})()},[]),(0,a.jsxs)("div",{className:"flex flex-col bg-white rounded-[40px] items-center justify-between py-5 max-h-[80vh] C-text-black h-full w-full",children:[(0,a.jsx)("div",{className:"h-[10%]",children:(0,a.jsx)("h2",{className:"text-center text-lg font-bold mb-2",children:"Ajout au stock"})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 w-full sm:w-[90%] px-5 h-full sm:h-[90%]",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 w-full h-[40%] sm:h-full",children:[(0,a.jsx)("div",{className:"w-full flex justify-center",children:w?(0,a.jsx)("div",{className:"bg-white w-[90%] rounded-[10px] border-[2px] C-border-red overflow-hidden transition-all duration-300",children:(0,a.jsxs)("div",{className:"flex cursor-pointer h-[5vh]",children:[(0,a.jsx)("div",{className:"flex items-center justify-center h-full gap-3 border-r-black border-r-[1px] w-[15%]",children:(0,a.jsx)("img",{src:w.Image||"/images/elements/default-product.jpg",alt:null==w?void 0:w.Label,className:"w-auto h-full rounded-[10px] object-cover"})}),(0,a.jsxs)("div",{className:"flex justify-between items-center w-[85%] h-full py-3 px-2 pr-4",children:[(0,a.jsxs)("div",{className:"w-[60%]",children:[(0,a.jsx)("p",{className:"C-text-black font-semibold text-xl",children:null==w?void 0:w.Label}),(0,a.jsx)("p",{className:"C-text-black font-normal text-sm",children:null==w?void 0:w.Barcode})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-lg justify-between w-[40%]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("i",{className:"fa-solid fa-boxes-stacked C-text-red text-2xl","aria-hidden":"true"}),(0,a.jsx)("p",{className:"C-text-black font-bold ",children:w.Box_quantity})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"fa-solid fa-box text-2xl C-text-red","aria-hidden":"true"}),(0,a.jsx)("input",{type:"checkbox",className:"w-5 h-5",disabled:!0,checked:1===w.Packing})]})]})]})]})},w.ID_product):(0,a.jsx)("div",{className:"bg-white w-[90%] h-[5vh] rounded-[10px] border-[2px] C-border-red overflow-hidden transition-all duration-300"})}),(0,a.jsxs)("div",{className:"w-full h-full overflow-y-scroll",children:[(0,a.jsxs)("div",{className:"mb-4 relative flex justify-end w-full",children:[(0,a.jsx)("input",{type:"text",placeholder:"Rechercher",value:f,onChange:e=>j(e.target.value),className:"w-[40%] px-4 py-2 border rounded-full text-black text-sm shadow-md"}),(0,a.jsx)("i",{className:"fas fa-search absolute right-4 top-3 C-text-red"})]}),P.map(e=>{let t=S.filter(t=>t.ID_category===e.ID_category);return(0,a.jsxs)("div",{className:"mb-4 rounded overflow-hidden",children:[(0,a.jsxs)("button",{onClick:()=>D(e.ID_category),className:"w-full text-left px-4 py-3 C-bg-white cursor-pointer C-text-red C-border-red border-b-[2px] text-white font-bold flex justify-between items-center",children:[(0,a.jsx)("span",{children:e.category.Label}),(0,a.jsx)("i",{className:"fas transition-transform ".concat(m===e.ID_category?"fa-chevron-up":"fa-chevron-down")})]}),(0,a.jsx)("div",{className:"transition-all duration-300 ease-in-out overflow-hidden ".concat(m===e.ID_category?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"),children:(0,a.jsx)("div",{className:"p-4 bg-white text-black w-full gap-2 flex flex-col items-center",children:t.map(e=>(0,a.jsx)("div",{className:"bg-white w-[90%] rounded-[10px] border-[2px] C-border-red overflow-hidden transition-all duration-300",onClick:()=>k(e),children:(0,a.jsxs)("div",{className:"flex cursor-pointer h-[6vh]",children:[(0,a.jsx)("div",{className:"flex items-center justify-center h-full gap-3 border-r-black border-r-[1px] w-[15%]",children:(0,a.jsx)("img",{src:e.Image||"/images/elements/default-product.jpg",alt:null==e?void 0:e.Label,className:"w-auto h-full rounded-[10px] object-cover"})}),(0,a.jsxs)("div",{className:"flex justify-between items-center w-[85%] h-full py-3 px-2 pr-4",children:[(0,a.jsxs)("div",{className:"w-[60%]",children:[(0,a.jsx)("p",{className:"C-text-black font-semibold text-xl",children:null==e?void 0:e.Label}),(0,a.jsx)("p",{className:"C-text-black font-normal text-sm",children:null==e?void 0:e.Barcode})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-lg justify-between w-[40%]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("i",{className:"fa-solid fa-boxes-stacked C-text-red text-2xl","aria-hidden":"true"}),(0,a.jsx)("p",{className:"C-text-black font-bold ",children:e.Box_quantity})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"fa-solid fa-box text-2xl C-text-red","aria-hidden":"true"}),(0,a.jsx)("input",{type:"checkbox",className:"w-5 h-5",disabled:!0,checked:1===e.Packing})]})]})]})]})},e.ID_product))})})]},e.ID_category)})]}),(0,a.jsx)("div",{className:"flex justify-center w-[90%] sm:w-full max-h-min",children:(0,a.jsx)(d.A,{})}),(0,a.jsxs)("div",{className:"flex items-center justify-around w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{children:"Nombre de boites"}),(0,a.jsx)("input",{type:"number",value:C,onChange:e=>_(e.target.value),className:"w-[50px] text-center border-[2px] C-border-red-var2 rounded C-text-black font-bold"})]}),(0,a.jsx)("button",{className:" C-text-white font-bold text-xl cursor-pointer C-bg-red rounded-full px-10 py-2",onClick:()=>{let e=[...x,{...w,Quantity:C}];u(e),b.A.set("pendingProducts",JSON.stringify(e)),k(null),_(0)},disabled:!w||C<=0,children:"Ajouter"})]})]}),E?(0,a.jsx)("div",{className:"flex justify-center w-[90%] sm:w-full max-h-min",children:(0,a.jsx)(d.A,{})}):(0,a.jsx)("div",{className:"flex justify-center h-[90%] sm:h-full",children:(0,a.jsx)("div",{className:"w-[1px] h-full C-bg-red-var2"})}),(0,a.jsx)("div",{className:" overflow-y-scroll w-full px-5 h-[40%] sm:w-full sm:h-full",children:(0,a.jsxs)("div",{className:"flex flex-col items-center w-full ",children:[x.map(e=>(0,a.jsx)("div",{className:"bg-white w-[90%] rounded-[10px] border-[2px] C-border-red mb-2 overflow-hidden transition-all duration-300 min-h-[5vh]",children:(0,a.jsxs)("div",{className:"flex items-center justify-center h-[8vh]",children:[(0,a.jsx)("div",{className:"flex items-center border-black sm:border-r-[1px] justify-center h-full gap-3 w-[15%]",children:(0,a.jsx)("img",{src:e.Image||"/images/elements/default-product.jpg",alt:null==e?void 0:e.Label,className:"w-auto h-full rounded-[10px] object-cover"})}),(0,a.jsxs)("div",{className:"flex justify-between border-black border-l-[1px] sm:border-0 items-center w-[85%] h-full py-3 px-2 pr-4",children:[(0,a.jsxs)("div",{className:"w-[40%]",children:[(0,a.jsx)("p",{className:"C-text-black font-semibold text-xl",children:null==e?void 0:e.Label}),(0,a.jsx)("p",{className:"C-text-black font-normal text-sm",children:null==e?void 0:e.Barcode})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-lg justify-between w-[60%]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("i",{className:"fa-solid fa-boxes-stacked C-text-red text-2xl","aria-hidden":"true"}),(0,a.jsx)("p",{className:"C-text-black font-bold ",children:e.Box_quantity})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"fa-solid fa-box text-2xl C-text-red","aria-hidden":"true"}),(0,a.jsx)("input",{type:"checkbox",className:"w-5 h-5",disabled:!0,checked:1===e.Packing})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("i",{className:"fa-solid fa-dolly C-text-red text-2xl","aria-hidden":"true"}),(0,a.jsx)("p",{className:"C-text-black font-bold ",children:e.Quantity})]})]})]})]})},e.ID_product)),x.length>0&&(0,a.jsx)("button",{className:"w-full mt-4 py-2 C-bg-red-var2 C-text-red font-bold rounded-full text-xl cursor-pointer",onClick:()=>{s(x),u([]),b.A.set("pendingProducts",[]),t()},children:"Termin\xe9"})]})})]})]})}var N=s(2394),v=s(1811);function g(){let[e,t]=(0,r.useState)([]),[s,p]=(0,r.useState)([]),[b,g]=(0,r.useState)([]),[y,w]=(0,r.useState)(null),[k,C]=(0,r.useState)(0),[_,I]=(0,r.useState)(0),[D,S]=(0,r.useState)(""),[P,E]=(0,r.useState)(!1),Q=()=>E(!0),A=()=>E(!1),L=(0,o.U)("(max-width: 768px)"),[B,O]=(0,r.useState)(!1),{user:T}=(0,n.A)();(0,r.useEffect)(()=>{(async()=>{if(T&&T.ID_store){var e;let s=await (0,i.yW)(T.ID_store),a=await (0,c.b)(T.ID_store);t(s),g(a),w(null===(e=a[0])||void 0===e?void 0:e.ID_category)}})()},[T]),(0,r.useEffect)(()=>{q()},[y,k,_,D,e]);let q=()=>{if(!y)return;let t=e.filter(e=>{var t;return(null===(t=e.product)||void 0===t?void 0:t.ID_category)===y});D&&(t=t.filter(e=>{var t,s;return(null===(t=e.product)||void 0===t?void 0:t.Barcode.startsWith(D))||(null===(s=e.product)||void 0===s?void 0:s.Label.toLowerCase().includes(D.toLowerCase()))})),0!==k&&t.sort((e,t)=>1===k?e.product.Label.localeCompare(t.product.Label):t.product.Label.localeCompare(e.product.Label)),0!==_&&t.sort((e,t)=>1===_?e.Quantity-t.Quantity:t.Quantity-e.Quantity),p(t)},J=["#FF6384","#36A2EB","#FFCE56","#4CAF50","#9C27B0"],F=async()=>{if(B)try{await (0,i.NI)(T.ID_store,e)}catch(e){console.error("Erreur lors de la mise \xe0 jour des stocks",e)}O(!B)};return(0,a.jsxs)("div",{className:"flex flex-col gap-[3vh] items-center justify-center relative z-10 text-white w-[100%] h-[100%] p-5",children:[(0,a.jsx)("div",{className:"w-[100%]",children:(0,a.jsx)(l.A,{path:"/"})}),(0,a.jsx)(f,{onAdd:()=>{Q(!0)},onEdit:F,isEditing:B}),(0,a.jsx)("div",{className:"flex items-center justify-start gap-3 w-[100%] px-4 overflow-x-auto h-[10vh] min-h-min scrollbar-hide",children:b.map((e,t)=>(0,a.jsx)("button",{onClick:()=>w(e.ID_category),className:"p-4 text-xl rounded-[20px] border-b-[5px] cursor-pointer transition-all bg-white ".concat(y===e.ID_category?"!border-red-500 text-red-500 ":"border-gray-300 C-text-black "),style:{borderColor:J[t%J.length]},children:e.category.Label},e.ID_category))}),(0,a.jsxs)("div",{className:"flex items-center justify-around sm:justify-end sm:gap-8 w-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-start w-[60%] sm:w-auto gap-2",children:[(0,a.jsxs)("button",{onClick:()=>C(e=>1===e?-1:+(-1!==e)),className:"flex items-center gap-2 cursor-pointer text-black px-3 py-2",children:[1===k?(0,a.jsx)("i",{className:"fas fa-sort-up","aria-hidden":"true"}):-1===k?(0,a.jsx)("i",{className:"fas fa-sort-down","aria-hidden":"true"}):(0,a.jsx)("i",{className:"fas fa-sort","aria-hidden":"true"}),"Par nom"]}),(0,a.jsxs)("button",{onClick:()=>I(e=>1===e?-1:+(-1!==e)),className:"flex items-center gap-2 cursor-pointer text-black px-3 py-2",children:[1===_?(0,a.jsx)("i",{className:"fas fa-sort-up","aria-hidden":"true"}):-1===_?(0,a.jsx)("i",{className:"fas fa-sort-down","aria-hidden":"true"}):(0,a.jsx)("i",{className:"fas fa-sort","aria-hidden":"true"}),"Par quantit\xe9"]})]}),(0,a.jsxs)("div",{className:"relative w-[40%] sm:w-[20%] flex items-center ",children:[(0,a.jsx)("input",{type:"text",placeholder:"Recherche",value:D,onChange:e=>S(e.target.value),className:"px-4 py-2 C-border-red-var2 border-[1px] text-sm w-full rounded-full text-black shadow-md"}),(0,a.jsx)("i",{className:"fas fa-search absolute right-3 top-3 C-text-red","aria-hidden":"true"})]})]}),(0,a.jsx)(d.A,{}),(0,a.jsx)("div",{className:"w-full h-full flex flex-col items-center mt-2",children:0===s.length?(0,a.jsx)("p",{className:"text-white text-center",children:"Aucun produit trouv\xe9."}):L?(0,a.jsx)(u,{stocks:s,isEditing:B,setStocks:t}):(0,a.jsx)(x,{stocks:s,isEditing:B,setStocks:t})}),(0,a.jsx)(m.N,{children:P&&(0,a.jsx)(N.Y,{isOpen:P,onClose:A,hideCloseButton:!0,backdrop:"opaque",classNames:{wrapper:"bg-black"},children:(0,a.jsxs)(v.g,{as:h.P.div,className:"bg-white fixed rounded-t-[40px] bottom-0 left-0 sm:right-0 sm:left-auto min-w-min h-[70vh] sm:h-[100vh] pt-[2vh]",initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{duration:.3,ease:"easeOut"},children:[(0,a.jsx)("div",{className:"p-4 cursor-pointer absolute ",onClick:A,children:(0,a.jsx)("i",{className:"fa-solid fa-arrow-left-long text-3xl C-text-black","aria-hidden":"true"})}),(0,a.jsx)(j,{products:e,onClose:A,onSubmit:async e=>{let s=await (0,i.yb)(T.ID_store,e);s&&(t(s),A())}})]})})})]})}},5068:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(5155);function l(){return(0,a.jsx)("div",{className:"h-[1px] w-[100%] C-bg-red-var2"})}},5248:(e,t,s)=>{Promise.resolve().then(s.bind(s,3448))},6713:(e,t,s)=>{"use strict";s.d(t,{U:()=>l});var a=s(2115);function l(e){let[t,s]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let t=window.matchMedia(e);s(t.matches);let a=e=>s(e.matches);return t.addEventListener("change",a),()=>t.removeEventListener("change",a)},[e]),t}},9142:(e,t,s)=>{"use strict";s.d(t,{O5:()=>c,QF:()=>d,c4:()=>n,iD:()=>i});var a=s(7383);let{fetchData:l}=s(9360),r="auth_token";async function i(e,t){try{let s=await l("/login",{method:"POST",body:JSON.stringify({Name:e,Password:t})});return c(s.token),await s}catch(e){return null}}function c(e){a.A.set(r,e,{expires:1,sameSite:"Strict"}),a.A.set("pendingProducts",[])}function n(){return a.A.get(r)}function d(){a.A.remove(r)}},9360:(e,t,s)=>{"use strict";s.r(t),s.d(t,{fetchData:()=>l});var a=s(9142);async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let s=(0,a.c4)(),l=await fetch("".concat("http://127.0.0.1:8000/api").concat(e),{...t,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:s?"Bearer ".concat(s):""},credentials:"include"});if(!l.ok)throw Error("Erreur HTTP! Statut: ".concat(l.status));return l.json()}catch(e){return null}}},9402:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,O:()=>n});var a=s(5155),l=s(2115),r=s(9142),i=s(5695);let c=(0,l.createContext)();function n(e){let{children:t}=e,[s,n]=(0,l.useState)(null),[d,o]=(0,l.useState)((0,r.c4)()),x=(0,i.useRouter)();(0,l.useEffect)(()=>{{let e=localStorage.getItem("user");e&&n(JSON.parse(e))}},[]),(0,l.useEffect)(()=>{d||x.push("/login")},[d]);let u=async(e,t)=>{let s=await (0,r.iD)(e,t);s&&s.token&&((0,r.O5)(s.token),n(s.user),o(s.token),localStorage.setItem("user",JSON.stringify(s.user)),x.push("/"))};return(0,a.jsx)(c.Provider,{value:{user:s,token:d,login:u,logout:()=>{(0,r.QF)(),n(null),o(null),localStorage.removeItem("user"),x.push("/login")}},children:t})}function d(){return(0,l.useContext)(c)}}},e=>{var t=t=>e(e.s=t);e.O(0,[806,562,94,668,441,684,358],()=>t(5248)),_N_E=e.O()}]);