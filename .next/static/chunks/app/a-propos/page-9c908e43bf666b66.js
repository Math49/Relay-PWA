(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[774],{783:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(5155),l=s(6874),r=s.n(l);function n(e){let{path:t}=e;return(0,a.jsx)("div",{children:(0,a.jsx)(r(),{href:t,className:"p-4",children:(0,a.jsx)("i",{className:"fa-solid fa-arrow-left-long text-3xl C-text-black","aria-hidden":"true"})})})}},3727:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(5155);function l(){return(0,a.jsx)("div",{className:"w-[100vw] C-bg-white flex items-center justify-center my-[2vh]",children:(0,a.jsx)("div",{className:"w-[30px] h-[30px] C-bg-red rounded-full p-1.5",children:(0,a.jsx)("img",{src:"/images/elements/logo-relay.svg",className:"w-[100%] h-[100%]"})})})}},6249:(e,t,s)=>{"use strict";s.d(t,{K:()=>l});let{fetchData:a}=s(9360);async function l(e){try{let t=await a("/store/".concat(e),{method:"GET"});return await t}catch(e){return null}}},8210:(e,t,s)=>{Promise.resolve().then(s.bind(s,8706))},8706:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(5155),l=s(2115),r=s(3727),n=s(783),i=s(9402),c=s(6249);function o(){let[e,t]=(0,l.useState)([]),{user:s}=(0,i.A)(),[o,u]=(0,l.useState)(null),[d,x]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=e=>{e.preventDefault(),u(e),x(!0)};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]),(0,l.useEffect)(()=>{(async()=>{s&&s.ID_store&&t(await (0,c.K)(s.ID_store))})()},[s]),(0,a.jsxs)("div",{className:"flex flex-col gap-[5vh] items-center justify-center sm:justify-between relative z-10 text-white w-[100%] h-[100%] p-5",children:[(0,a.jsx)("div",{className:"w-[100%]",children:(0,a.jsx)(n.A,{path:"/"})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-[5vh] items-center justify-center w-[100%]",children:[(0,a.jsx)("div",{className:"sm:w-[50%] w-full flex justify-center",children:(0,a.jsxs)("div",{className:"w-[80%] C-bg-red gap-[7vh] flex flex-col justify-center sm:items-center items-start rounded-[40px] px-[8vw] sm:px-8 py-[8vh]",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start justify-center gap-7",children:[(0,a.jsxs)("div",{className:"flex items-center justify-around gap-3",children:[(0,a.jsx)("i",{className:"fa-solid fa-location-dot text-4xl"}),(0,a.jsx)("p",{className:"text-xl",children:e.Address})]}),(0,a.jsxs)("div",{className:"flex items-center justify-around gap-3",children:[(0,a.jsx)("i",{className:"fa-solid fa-phone text-4xl"}),(0,a.jsx)("p",{className:"text-xl",children:e.Phone})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start justify-center gap-7",children:[(0,a.jsxs)("div",{className:"flex items-center justify-around gap-3",children:[(0,a.jsx)("i",{className:"fa-solid fa-user-tie text-4xl"}),(0,a.jsx)("p",{className:"text-xl",children:e.Manager_name})]}),(0,a.jsxs)("div",{className:"flex items-center justify-around gap-3",children:[(0,a.jsx)("i",{className:"fa-solid fa-phone text-4xl"}),(0,a.jsx)("p",{className:"text-xl",children:e.Manager_phone})]})]})]})}),(0,a.jsx)("div",{className:"sm:w-[50%] flex justify-center",children:(0,a.jsx)("button",{onClick:()=>{o&&(o.prompt(),o.userChoice.then(e=>{"accepted"===e.outcome?console.log("✅ L'utilisateur a install\xe9 la PWA."):console.log("❌ L'utilisateur a refus\xe9 l'installation."),u(null),x(!1)}))},className:"C-bg-red-var2 C-text-black font-bold cursor-pointer px-[20vw] sm:px-[5vw] py-4 rounded-full text-2xl",children:"T\xe9l\xe9charger"})})]}),(0,a.jsx)(r.A,{})]})}},9142:(e,t,s)=>{"use strict";s.d(t,{O5:()=>i,QF:()=>o,c4:()=>c,iD:()=>n});var a=s(7383);let{fetchData:l}=s(9360),r="auth_token";async function n(e,t){try{let s=await l("/login",{method:"POST",body:JSON.stringify({Name:e,Password:t})});return i(s.token),await s}catch(e){return null}}function i(e){a.A.set(r,e,{expires:1,sameSite:"Strict"}),a.A.set("pendingProducts",[])}function c(){return a.A.get(r)}function o(){a.A.remove(r)}},9360:(e,t,s)=>{"use strict";s.r(t),s.d(t,{fetchData:()=>l});var a=s(9142);async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let s=(0,a.c4)(),l=await fetch("".concat("https://relay-api.mathis-mercier.mds-angers.yt/api").concat(e),{...t,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:s?"Bearer ".concat(s):""},credentials:"include"});if(!l.ok)throw Error("Erreur HTTP! Statut: ".concat(l.status));return l.json()}catch(e){return null}}},9402:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,O:()=>c});var a=s(5155),l=s(2115),r=s(9142),n=s(5695);let i=(0,l.createContext)();function c(e){let{children:t}=e,[s,c]=(0,l.useState)(null),[o,u]=(0,l.useState)((0,r.c4)()),d=(0,n.useRouter)();(0,l.useEffect)(()=>{{let e=localStorage.getItem("user");e&&c(JSON.parse(e))}},[]),(0,l.useEffect)(()=>{o||d.push("/login")},[o]);let x=async(e,t)=>{let s=await (0,r.iD)(e,t);s&&s.token&&((0,r.O5)(s.token),c(s.user),u(s.token),localStorage.setItem("user",JSON.stringify(s.user)),d.push("/"))};return(0,a.jsx)(i.Provider,{value:{user:s,token:o,login:x,logout:()=>{(0,r.QF)(),c(null),u(null),localStorage.removeItem("user"),d.push("/login")}},children:t})}function o(){return(0,l.useContext)(i)}}},e=>{var t=t=>e(e.s=t);e.O(0,[806,441,684,358],()=>t(8210)),_N_E=e.O()}]);